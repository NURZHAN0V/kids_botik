from –∏–≥—Ä—ã.–≤–∏—Å–µ–ª–∏—Ü–∞ import —Ñ—É–Ω–∫—Ü–∏—è_–≤–∏—Å–µ–ª–∏—Ü–∞
from –∏–≥—Ä—ã.—É–≥–∞–¥–∞–π–∫–∞ import —Ñ—É–Ω–∫—Ü–∏—è_—É–≥–∞–¥–∞–π–∫–∞
from –∏–≥—Ä—ã.–º–æ—Ä—Å–∫–æ–π–±–æ–π import —Å–æ–∑–¥–∞—Ç—å_–∏–≥—Ä—É_–º–æ—Ä—Å–∫–æ–π_–±–æ–π, —Å–æ–∑–¥–∞—Ç—å_–∫–Ω–æ–ø–∫–∏_–º–æ—Ä—Å–∫–æ–π_–±–æ–π, –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_—Ö–æ–¥_–º–æ—Ä—Å–∫–æ–π_–±–æ–π
from –∏–≥—Ä—ã.—Ç—Ä–∏–≤—Ä—è–¥ import —Å–æ–∑–¥–∞—Ç—å_–∏–≥—Ä—É_—Ç—Ä–∏_–≤_—Ä—è–¥, —Å–æ–∑–¥–∞—Ç—å_–∫–Ω–æ–ø–∫–∏_—Ç—Ä–∏_–≤_—Ä—è–¥, –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_—Ö–æ–¥_—Ç—Ä–∏_–≤_—Ä—è–¥, –æ–±–º–µ–Ω_–∫–ª–µ—Ç–æ–∫, —Å–æ–∑–¥–∞—Ç—å_—Ç–µ–∫—Å—Ç_–∏–≥—Ä—ã
from –∏–≥—Ä—ã.–∫—Ä–µ—Å—Ç–∏–∫–∏–Ω–æ–ª–∏–∫–∏ import —Ñ—É–Ω–∫—Ü–∏—è_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏
from –∏–≥—Ä—ã.–¥–∏–Ω–æ import —Ñ—É–Ω–∫—Ü–∏—è_–¥–∏–Ω–æ

# –ò–º–ø–æ—Ä—Ç—ã –¥–ª—è Telegram –±–æ—Ç–∞
try:
    import telebot
    from config import TELEGRAM_BOT_TOKEN, ONLY_TELEGRAM
    telegram_available = True
except ImportError:
    telegram_available = False
    TELEGRAM_BOT_TOKEN = "YOUR_BOT_TOKEN_HERE"
    ONLY_TELEGRAM = None
    print("‚ö†Ô∏è –î–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: pip install pyTelegramBotAPI")
except:
    telegram_available = False
    TELEGRAM_BOT_TOKEN = "YOUR_BOT_TOKEN_HERE"
    ONLY_TELEGRAM = None
    print("‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–∞–π–ª–µ config.py")

# –°–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä –¥–ª—è Telegram –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
–∏–≥—Ä—ã_–≤–∏—Å–µ–ª–∏—Ü–∞ = {}
–∏–≥—Ä—ã_—É–≥–∞–¥–∞–π–∫–∞ = {}
–∏–≥—Ä—ã_–º–æ—Ä—Å–∫–æ–π_–±–æ–π = {}
–∏–≥—Ä—ã_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏ = {}
–∏–≥—Ä—ã_—Ç—Ä–∏_–≤_—Ä—è–¥ = {}

def —Å–æ–∑–¥–∞—Ç—å_–∏–≥—Ä—É_–≤–∏—Å–µ–ª–∏—Ü–∞(user_id, —É—Ä–æ–≤–µ–Ω—å):
    """–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∏–≥—Ä—ã –≤–∏—Å–µ–ª–∏—Ü–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    import random
    —Å–ª–æ–≤–∞ = {
        "–ª–µ–≥–∫–∏–π": ['–∫–æ—Ç', '–ø—ë—Å', '–¥–æ–º', '–ª–µ—Å', '—Å–≤–µ—Ç'],
        "—Å—Ä–µ–¥–Ω–∏–π": ['—Å—Ç–æ–ª', '–ª—É–Ω–∞', '—Ä–µ–∫–∞', '–Ω–æ—á—å', '—Ç–µ–Ω—å'],
        "—Å–ª–æ–∂–Ω—ã–π": ['–ø—Ä–∏–º–µ—Ä', '—É–ª—ã–±–∫–∞', '–∫–∞—Ä—Ç–∏–Ω–∞', '—Ä–µ—à–µ–Ω–∏–µ']
    }
    
    —Å–ª–æ–≤–æ = random.choice(—Å–ª–æ–≤–∞[—É—Ä–æ–≤–µ–Ω—å])
    –∏–≥—Ä—ã_–≤–∏—Å–µ–ª–∏—Ü–∞[user_id] = {
        '—Å–ª–æ–≤–æ': —Å–ª–æ–≤–æ,
        '—É–≥–∞–¥–∞–Ω–æ': ['_'] * len(—Å–ª–æ–≤–æ),
        '–ø–æ–ø—ã—Ç–∫–∏': 7 if —É—Ä–æ–≤–µ–Ω—å == "–ª–µ–≥–∫–∏–π" else 5 if —É—Ä–æ–≤–µ–Ω—å == "—Å—Ä–µ–¥–Ω–∏–π" else 3,
        '—É—Ä–æ–≤–µ–Ω—å': —É—Ä–æ–≤–µ–Ω—å
    }

def –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_—Ö–æ–¥_–≤–∏—Å–µ–ª–∏—Ü–∞(user_id, –±—É–∫–≤–∞):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ö–æ–¥–∞ –≤ –∏–≥—Ä–µ –≤–∏—Å–µ–ª–∏—Ü–∞"""
    –∏–≥—Ä–∞ = –∏–≥—Ä—ã_–≤–∏—Å–µ–ª–∏—Ü–∞[user_id]
    —Å–ª–æ–≤–æ = –∏–≥—Ä–∞['—Å–ª–æ–≤–æ']
    —É–≥–∞–¥–∞–Ω–æ = –∏–≥—Ä–∞['—É–≥–∞–¥–∞–Ω–æ']
    
    if –±—É–∫–≤–∞ in —Å–ª–æ–≤–æ:
        for i in range(len(—Å–ª–æ–≤–æ)):
            if —Å–ª–æ–≤–æ[i] == –±—É–∫–≤–∞:
                —É–≥–∞–¥–∞–Ω–æ[i] = –±—É–∫–≤–∞
        —Ä–µ–∑—É–ª—å—Ç–∞—Ç = "‚úÖ –ï—Å—Ç—å —Ç–∞–∫–∞—è –±—É–∫–≤–∞!"
    else:
        –∏–≥—Ä–∞['–ø–æ–ø—ã—Ç–∫–∏'] -= 1
        —Ä–µ–∑—É–ª—å—Ç–∞—Ç = "‚ùå –ù–µ—Ç —Ç–∞–∫–æ–π –±—É–∫–≤—ã"
    
    # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
    —Å–æ—Å—Ç–æ—è–Ω–∏–µ = f"–°–ª–æ–≤–æ: {' '.join(—É–≥–∞–¥–∞–Ω–æ)}\n–û—Å—Ç–∞–ª–æ—Å—å –ø–æ–ø—ã—Ç–æ–∫: {–∏–≥—Ä–∞['–ø–æ–ø—ã—Ç–∫–∏']}"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–∫–æ–Ω—á–∞–Ω–∏–µ –∏–≥—Ä—ã
    if '_' not in —É–≥–∞–¥–∞–Ω–æ:
        del –∏–≥—Ä—ã_–≤–∏—Å–µ–ª–∏—Ü–∞[user_id]
        return f"{—Ä–µ–∑—É–ª—å—Ç–∞—Ç}\n{—Å–æ—Å—Ç–æ—è–Ω–∏–µ}\n\nüéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –¢—ã —É–≥–∞–¥–∞–ª —Å–ª–æ–≤–æ: {—Å–ª–æ–≤–æ}!\n–ß—Ç–æ–±—ã —Å—ã–≥—Ä–∞—Ç—å –µ—â—ë, –Ω–∞–ø–∏—à–∏ '–≤–∏—Å–µ–ª–∏—Ü–∞'"
    elif –∏–≥—Ä–∞['–ø–æ–ø—ã—Ç–∫–∏'] <= 0:
        del –∏–≥—Ä—ã_–≤–∏—Å–µ–ª–∏—Ü–∞[user_id]
        return f"{—Ä–µ–∑—É–ª—å—Ç–∞—Ç}\n{—Å–æ—Å—Ç–æ—è–Ω–∏–µ}\n\nüíÄ –¢—ã –ø—Ä–æ–∏–≥—Ä–∞–ª. –°–ª–æ–≤–æ –±—ã–ª–æ: {—Å–ª–æ–≤–æ}\n–ß—Ç–æ–±—ã —Å—ã–≥—Ä–∞—Ç—å –µ—â—ë, –Ω–∞–ø–∏—à–∏ '–≤–∏—Å–µ–ª–∏—Ü–∞'"
    
    return f"{—Ä–µ–∑—É–ª—å—Ç–∞—Ç}\n{—Å–æ—Å—Ç–æ—è–Ω–∏–µ}\n\n–í–≤–µ–¥–∏ —Å–ª–µ–¥—É—é—â—É—é –±—É–∫–≤—É:"

def —Å–æ–∑–¥–∞—Ç—å_–∏–≥—Ä—É_—É–≥–∞–¥–∞–π–∫–∞(user_id):
    """–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∏–≥—Ä—ã —É–≥–∞–¥–∞–π–∫–∞"""
    import random
    –∏–≥—Ä—ã_—É–≥–∞–¥–∞–π–∫–∞[user_id] = {
        '—á–∏—Å–ª–æ': random.randint(1, 10),
        '–ø–æ–ø—ã—Ç–∫–∏': 0
    }

def –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_—Ö–æ–¥_—É–≥–∞–¥–∞–π–∫–∞(user_id, —á–∏—Å–ª–æ_str):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ö–æ–¥–∞ –≤ —É–≥–∞–¥–∞–π–∫–µ"""
    try:
        —á–∏—Å–ª–æ = int(—á–∏—Å–ª–æ_str)
        –∏–≥—Ä–∞ = –∏–≥—Ä—ã_—É–≥–∞–¥–∞–π–∫–∞[user_id]
        –∏–≥—Ä–∞['–ø–æ–ø—ã—Ç–∫–∏'] += 1
        
        if —á–∏—Å–ª–æ == –∏–≥—Ä–∞['—á–∏—Å–ª–æ']:
            del –∏–≥—Ä—ã_—É–≥–∞–¥–∞–π–∫–∞[user_id]
            return f"üéâ –ú–æ–ª–æ–¥–µ—Ü! –¢—ã —É–≥–∞–¥–∞–ª —Å {–∏–≥—Ä–∞['–ø–æ–ø—ã—Ç–∫–∏']} –ø–æ–ø—ã—Ç–∫–∏!\n–ú–æ—ë —á–∏—Å–ª–æ: {–∏–≥—Ä–∞['—á–∏—Å–ª–æ']}\n–î–ª—è –Ω–æ–≤–æ–π –∏–≥—Ä—ã –Ω–∞–ø–∏—à–∏ '—É–≥–∞–¥–∞–π–∫–∞'"
        elif —á–∏—Å–ª–æ < –∏–≥—Ä–∞['—á–∏—Å–ª–æ']:
            return f"üìà –ú–æ—ë —á–∏—Å–ª–æ –±–æ–ª—å—à–µ! –ü–æ–ø—ã—Ç–∫–∞ {–∏–≥—Ä–∞['–ø–æ–ø—ã—Ç–∫–∏']}\n–í–≤–µ–¥–∏ —á–∏—Å–ª–æ:"
        else:
            return f"üìâ –ú–æ—ë —á–∏—Å–ª–æ –º–µ–Ω—å—à–µ! –ü–æ–ø—ã—Ç–∫–∞ {–∏–≥—Ä–∞['–ø–æ–ø—ã—Ç–∫–∏']}\n–í–≤–µ–¥–∏ —á–∏—Å–ª–æ:"
    except:
        return "‚ö†Ô∏è –í–≤–µ–¥–∏ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 10"



def —Å–æ–∑–¥–∞—Ç—å_–∏–≥—Ä—É_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏(user_id):
    """–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∏–≥—Ä—ã –∫—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏"""
    –∏–≥—Ä—ã_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏[user_id] = {
        '–ø–æ–ª–µ': [["‚¨ú" for _ in range(3)] for _ in range(3)],
        '—Ö–æ–¥—ã': 0
    }

def —Å–æ–∑–¥–∞—Ç—å_–∫–Ω–æ–ø–∫–∏_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏(–ø–æ–ª–µ):
    """–°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –¥–ª—è –∫—Ä–µ—Å—Ç–∏–∫–æ–≤-–Ω–æ–ª–∏–∫–æ–≤"""
    import telebot
    markup = telebot.types.InlineKeyboardMarkup(row_width=3)
    for i in range(3):
        row = []
        for j in range(3):
            —Å–∏–º–≤–æ–ª = –ø–æ–ª–µ[i][j]
            row.append(telebot.types.InlineKeyboardButton(—Å–∏–º–≤–æ–ª, callback_data=f"tic_{i}_{j}"))
        markup.row(*row)
    return markup

def –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_—Ö–æ–¥_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏(user_id, x, y):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ö–æ–¥–∞ –≤ –∫—Ä–µ—Å—Ç–∏–∫–∞—Ö-–Ω–æ–ª–∏–∫–∞—Ö"""
    –∏–≥—Ä–∞ = –∏–≥—Ä—ã_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏[user_id]
    
    if –∏–≥—Ä–∞['–ø–æ–ª–µ'][x][y] != "‚¨ú":
        return None, "‚ö†Ô∏è –ö–ª–µ—Ç–∫–∞ –∑–∞–Ω—è—Ç–∞"
    
    # –•–æ–¥ –∏–≥—Ä–æ–∫–∞
    –∏–≥—Ä–∞['–ø–æ–ª–µ'][x][y] = "‚ùå"
    –∏–≥—Ä–∞['—Ö–æ–¥—ã'] += 1
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã –∏–≥—Ä–æ–∫–∞
    if –ø—Ä–æ–≤–µ—Ä–∏—Ç—å_–ø–æ–±–µ–¥—É_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏(–∏–≥—Ä–∞['–ø–æ–ª–µ'], "‚ùå"):
        del –∏–≥—Ä—ã_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏[user_id]
        return None, "üéâ –¢—ã –ø–æ–±–µ–¥–∏–ª!\n–î–ª—è –Ω–æ–≤–æ–π –∏–≥—Ä—ã –Ω–∞–ø–∏—à–∏ '–∫—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏'"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∏—á—å–µ–π
    if –∏–≥—Ä–∞['—Ö–æ–¥—ã'] >= 9:
        del –∏–≥—Ä—ã_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏[user_id]
        return None, "ü§ù –ù–∏—á—å—è!\n–î–ª—è –Ω–æ–≤–æ–π –∏–≥—Ä—ã –Ω–∞–ø–∏—à–∏ '–∫—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏'"
    
    # –•–æ–¥ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
    —Å–≤–æ–±–æ–¥–Ω—ã–µ = [(i, j) for i in range(3) for j in range(3) if –∏–≥—Ä–∞['–ø–æ–ª–µ'][i][j] == "‚¨ú"]
    if —Å–≤–æ–±–æ–¥–Ω—ã–µ:
        import random
        comp_x, comp_y = random.choice(—Å–≤–æ–±–æ–¥–Ω—ã–µ)
        –∏–≥—Ä–∞['–ø–æ–ª–µ'][comp_x][comp_y] = "‚≠ï"
        –∏–≥—Ä–∞['—Ö–æ–¥—ã'] += 1
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
        if –ø—Ä–æ–≤–µ—Ä–∏—Ç—å_–ø–æ–±–µ–¥—É_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏(–∏–≥—Ä–∞['–ø–æ–ª–µ'], "‚≠ï"):
            del –∏–≥—Ä—ã_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏[user_id]
            return None, "üíÄ –ü–æ–±–µ–¥–∏–ª –∫–æ–º–ø—å—é—Ç–µ—Ä\n–î–ª—è –Ω–æ–≤–æ–π –∏–≥—Ä—ã –Ω–∞–ø–∏—à–∏ '–∫—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏'"
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∏—á—å–µ–π –ø–æ—Å–ª–µ —Ö–æ–¥–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
        if –∏–≥—Ä–∞['—Ö–æ–¥—ã'] >= 9:
            del –∏–≥—Ä—ã_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏[user_id]
            return None, "ü§ù –ù–∏—á—å—è!\n–î–ª—è –Ω–æ–≤–æ–π –∏–≥—Ä—ã –Ω–∞–ø–∏—à–∏ '–∫—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏'"
    
    markup = —Å–æ–∑–¥–∞—Ç—å_–∫–Ω–æ–ø–∫–∏_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏(–∏–≥—Ä–∞['–ø–æ–ª–µ'])
    return markup, "–¢–≤–æ–π —Ö–æ–¥:"

def –ø—Ä–æ–≤–µ—Ä–∏—Ç—å_–ø–æ–±–µ–¥—É_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏(–ø–æ–ª–µ, —Å–∏–º–≤–æ–ª):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã –≤ –∫—Ä–µ—Å—Ç–∏–∫–∞—Ö-–Ω–æ–ª–∏–∫–∞—Ö"""
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–æ–∫
    for i in range(3):
        if all(–ø–æ–ª–µ[i][j] == —Å–∏–º–≤–æ–ª for j in range(3)):
            return True
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–±—Ü–æ–≤
    for j in range(3):
        if all(–ø–æ–ª–µ[i][j] == —Å–∏–º–≤–æ–ª for i in range(3)):
            return True
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–≥–æ–Ω–∞–ª–µ–π
    if all(–ø–æ–ª–µ[i][i] == —Å–∏–º–≤–æ–ª for i in range(3)):
        return True
    if all(–ø–æ–ª–µ[i][2-i] == —Å–∏–º–≤–æ–ª for i in range(3)):
        return True
    
    return False

def –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_—Å–æ–æ–±—â–µ–Ω–∏–µ(—Å–æ–æ–±—â–µ–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç, –∑–∞–ø—É—Å—Ç–∏—Ç—å_–∏–≥—Ä—É=None):
    """–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏ –∏ Telegram"""
    —Å–æ–æ–±—â–µ–Ω–∏–µ = —Å–æ–æ–±—â–µ–Ω–∏–µ.strip().lower()

    if "–ø—Ä–∏–≤–µ—Ç" in —Å–æ–æ–±—â–µ–Ω–∏–µ:
        –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("üëÆ: –ü—Ä–∏–≤–µ—Ç! –†–∞–¥ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å üòä –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?")

    elif "–∫–∞–∫ –¥–µ–ª–∞" in —Å–æ–æ–±—â–µ–Ω–∏–µ:
        –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("üëÆ: –£ –º–µ–Ω—è –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ, —è –≤ —Ä–µ–∂–∏–º–µ –æ–Ω–ª–∞–π–Ω –∏ –≥–æ—Ç–æ–≤ –ø–æ–º–æ–≥–∞—Ç—å! –ê —É —Ç–µ–±—è?")

    elif "–∏–º—è" in —Å–æ–æ–±—â–µ–Ω–∏–µ:
        –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("üëÆ: –ú–µ–Ω—è –∑–æ–≤—É—Ç –ü–æ–º–æ—â–Ω–∏–∫. –ú–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ üëÆ.")

    elif "—Å–ø–∞—Å–∏–±–æ" in —Å–æ–æ–±—â–µ–Ω–∏–µ:
        –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("üëÆ: –í—Å–µ–≥–¥–∞ —Ä–∞–¥ –ø–æ–º–æ—á—å! üòä")

    elif "–ø–æ–∫–∞" in —Å–æ–æ–±—â–µ–Ω–∏–µ or "–≤—ã—Ö–æ–¥" in —Å–æ–æ–±—â–µ–Ω–∏–µ:
        –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("üëÆ: –î–æ –≤—Å—Ç—Ä–µ—á–∏! –ù–∞–¥–µ—é—Å—å, —Ç–µ–±–µ –±—ã–ª–æ –≤–µ—Å–µ–ª–æ üòÑ")

    elif ("–≤–∏—Å–µ–ª–∏—Ü" in —Å–æ–æ–±—â–µ–Ω–∏–µ or "—É–≥–∞–¥–∞–π" in —Å–æ–æ–±—â–µ–Ω–∏–µ or "–º–æ—Ä—Å–∫–æ–π" in —Å–æ–æ–±—â–µ–Ω–∏–µ or "–∫—Ä–µ—Å—Ç–∏–∫–∏" in —Å–æ–æ–±—â–µ–Ω–∏–µ or "–¥–∏–Ω–æ" in —Å–æ–æ–±—â–µ–Ω–∏–µ or "—Ç—Ä–∏" in —Å–æ–æ–±—â–µ–Ω–∏–µ or "—Ä—è–¥" in —Å–æ–æ–±—â–µ–Ω–∏–µ) and –∑–∞–ø—É—Å—Ç–∏—Ç—å_–∏–≥—Ä—É is not None:
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–≥—Ä –≤ Telegram
        if "–≤–∏—Å–µ–ª–∏—Ü" in —Å–æ–æ–±—â–µ–Ω–∏–µ: return "hangman_start"
        elif "—É–≥–∞–¥–∞–π" in —Å–æ–æ–±—â–µ–Ω–∏–µ: return "guess_start"
        elif "–º–æ—Ä—Å–∫–æ–π" in —Å–æ–æ–±—â–µ–Ω–∏–µ: return "sea_start"
        elif "–∫—Ä–µ—Å—Ç–∏–∫–∏" in —Å–æ–æ–±—â–µ–Ω–∏–µ: return "tic_start"
        elif "–¥–∏–Ω–æ" in —Å–æ–æ–±—â–µ–Ω–∏–µ: return "dino_start"
        elif "—Ç—Ä–∏" in —Å–æ–æ–±—â–µ–Ω–∏–µ or "—Ä—è–¥" in —Å–æ–æ–±—â–µ–Ω–∏–µ: return "match_start"

    elif "–∏–≥—Ä" in —Å–æ–æ–±—â–µ–Ω–∏–µ:
        –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("üëÆ: –û—Ç–ª–∏—á–Ω–æ! –Ø —É–º–µ—é –∏–≥—Ä–∞—Ç—å –≤:\n- –í–∏—Å–µ–ª–∏—Ü–∞ (–Ω–∞–ø–∏—à–∏ '–≤–∏—Å–µ–ª–∏—Ü–∞')\n- –£–≥–∞–¥–∞–π —á–∏—Å–ª–æ (–Ω–∞–ø–∏—à–∏ '—É–≥–∞–¥–∞–π–∫–∞')\n- –ú–æ—Ä—Å–∫–æ–π –±–æ–π (–Ω–∞–ø–∏—à–∏ '–º–æ—Ä—Å–∫–æ–π –±–æ–π')\n- –ö—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏ (–Ω–∞–ø–∏—à–∏ '–∫—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏')\n- –¢—Ä–∏ –≤ —Ä—è–¥ (–Ω–∞–ø–∏—à–∏ '—Ç—Ä–∏ –≤ —Ä—è–¥')\n- –î–∏–Ω–æ (–Ω–∞–ø–∏—à–∏ '–¥–∏–Ω–æ')")

    elif "–∞–Ω–µ–∫–¥–æ—Ç" in —Å–æ–æ–±—â–µ–Ω–∏–µ:
        –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("üëÆ: ‚Äî –ß—Ç–æ —Å–∫–∞–∑–∞–ª –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –Ω–∞ —Å–≤–∏–¥–∞–Ω–∏–∏?\n‚Äî –£ –º–µ–Ω—è \"404: —á—É–≤—Å—Ç–≤–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ\".")

    elif "–ø–æ–≥–æ–¥–∞" in —Å–æ–æ–±—â–µ–Ω–∏–µ:
        –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("üëÆ: –Ø –Ω–µ —Å–ª–µ–∂—É –∑–∞ –ø–æ–≥–æ–¥–æ–π, –Ω–æ –¥—É–º–∞—é, —Å–µ–≥–æ–¥–Ω—è –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ üòâ")

    elif "—É–º–µ–µ—à—å" in —Å–æ–æ–±—â–µ–Ω–∏–µ:
        –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("üëÆ: –Ø —É–º–µ—é –±–æ–ª—Ç–∞—Ç—å, —à—É—Ç–∏—Ç—å, –∏–≥—Ä–∞—Ç—å –∏ –Ω–µ–º–Ω–æ–≥–æ –¥—É–º–∞—Ç—å... –ù–æ –ø–æ–∫–∞ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ üòÖ")

    elif "–ø–æ—á–µ–º—É" in —Å–æ–æ–±—â–µ–Ω–∏–µ:
        –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("üëÆ: –ü–æ—Ç–æ–º—É —á—Ç–æ –∫—Ç–æ-—Ç–æ –∫–æ–≥–¥–∞-—Ç–æ –Ω–∞–ø–∏—Å–∞–ª –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å—Ç–∏–ª –º–µ–Ω—è –≤ —ç—Ç–æ—Ç –º–∏—Ä ü§ñ")

    else:
        –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("üëÆ: –•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å... –î–∞–≤–∞–π –æ–±—Å—É–¥–∏–º —ç—Ç–æ –ø–æ-–¥—Ä—É–≥–æ–º—É?")



def –∑–∞–ø—É—Å—Ç–∏—Ç—å_–±–æ—Ç–∞():
    """–ó–∞–ø—É—Å–∫ Telegram –±–æ—Ç–∞"""
    if not telegram_available:
        print("‚ùå Telegram –±–æ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: pip install pyTelegramBotAPI")
        return False
    
    if TELEGRAM_BOT_TOKEN == "YOUR_BOT_TOKEN_HERE":
        print("‚ùå –ù–∞—Å—Ç—Ä–æ–π—Ç–µ TELEGRAM_BOT_TOKEN –≤ —Ñ–∞–π–ª–µ config.py")
        return False
    
    bot = telebot.TeleBot(TELEGRAM_BOT_TOKEN)
    
    @bot.message_handler(commands=['start'])
    def send_welcome(message):
        bot.reply_to(message, "üëÆ: –ü—Ä–∏–≤–µ—Ç! –Ø —Ç–≤–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫. –£–º–µ—é –±–æ–ª—Ç–∞—Ç—å, —à—É—Ç–∏—Ç—å –∏ –∏–≥—Ä–∞—Ç—å!\n\n"
                              "üéÆ –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–≥—Ä—ã:\n"
                              "- –í–∏—Å–µ–ª–∏—Ü–∞ (–Ω–∞–ø–∏—à–∏ '–≤–∏—Å–µ–ª–∏—Ü–∞')\n"
                              "- –£–≥–∞–¥–∞–π —á–∏—Å–ª–æ (–Ω–∞–ø–∏—à–∏ '—É–≥–∞–¥–∞–π–∫–∞')\n"
                              "- –ú–æ—Ä—Å–∫–æ–π –±–æ–π (–Ω–∞–ø–∏—à–∏ '–º–æ—Ä—Å–∫–æ–π –±–æ–π')\n"
                              "- –ö—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏ (–Ω–∞–ø–∏—à–∏ '–∫—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏')\n"
                              "- –¢—Ä–∏ –≤ —Ä—è–¥ (–Ω–∞–ø–∏—à–∏ '—Ç—Ä–∏ –≤ —Ä—è–¥')\n"
                              "- –î–∏–Ω–æ (–Ω–∞–ø–∏—à–∏ '–¥–∏–Ω–æ')\n\n"
                              "üí¨ –¢–∞–∫–∂–µ –º–æ–∂–µ—à—å –ø—Ä–æ—Å—Ç–æ –æ–±—â–∞—Ç—å—Å—è —Å–æ –º–Ω–æ–π!")
    
    @bot.message_handler(func=lambda message: True)
    def echo_all(message):
        user_id = message.from_user.id
        —Ç–µ–∫—Å—Ç = message.text.strip().lower()
        
        def –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç(—Ç–µ–∫—Å—Ç):
            bot.reply_to(message, —Ç–µ–∫—Å—Ç)
        
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–æ–º–∞–Ω–¥—É "—Å—Ç–æ–ø"
        if —Ç–µ–∫—Å—Ç == "—Å—Ç–æ–ø":
            –∏–≥—Ä–∞_–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ = False
            if user_id in –∏–≥—Ä—ã_–≤–∏—Å–µ–ª–∏—Ü–∞: 
                del –∏–≥—Ä—ã_–≤–∏—Å–µ–ª–∏—Ü–∞[user_id]
                –∏–≥—Ä–∞_–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ = True
            elif user_id in –∏–≥—Ä—ã_—É–≥–∞–¥–∞–π–∫–∞: 
                del –∏–≥—Ä—ã_—É–≥–∞–¥–∞–π–∫–∞[user_id]
                –∏–≥—Ä–∞_–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ = True
            elif user_id in –∏–≥—Ä—ã_–º–æ—Ä—Å–∫–æ–π_–±–æ–π: 
                del –∏–≥—Ä—ã_–º–æ—Ä—Å–∫–æ–π_–±–æ–π[user_id]
                –∏–≥—Ä–∞_–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ = True
            elif user_id in –∏–≥—Ä—ã_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏: 
                del –∏–≥—Ä—ã_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏[user_id]
                –∏–≥—Ä–∞_–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ = True
            elif user_id in –∏–≥—Ä—ã_—Ç—Ä–∏_–≤_—Ä—è–¥: 
                del –∏–≥—Ä—ã_—Ç—Ä–∏_–≤_—Ä—è–¥[user_id]
                –∏–≥—Ä–∞_–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ = True
            
            if –∏–≥—Ä–∞_–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞:
                –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("üëÆ: –ò–≥—Ä–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞. –ù–∞–ø–∏—à–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–æ–≤–æ–π!")
            else:
                –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("üëÆ: –¢—ã –Ω–µ –≤ –∏–≥—Ä–µ. –ù–∞–ø–∏—à–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞!")
            return

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä—ã
        if user_id in –∏–≥—Ä—ã_–≤–∏—Å–µ–ª–∏—Ü–∞:
            if len(—Ç–µ–∫—Å—Ç) == 1 and —Ç–µ–∫—Å—Ç.isalpha():
                —Ä–µ–∑—É–ª—å—Ç–∞—Ç = –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_—Ö–æ–¥_–≤–∏—Å–µ–ª–∏—Ü–∞(user_id, —Ç–µ–∫—Å—Ç)
                –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç(—Ä–µ–∑—É–ª—å—Ç–∞—Ç)
            else:
                –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏ –æ–¥–Ω—É –±—É–∫–≤—É –∏–ª–∏ '—Å—Ç–æ–ø'")
            return
        elif user_id in –∏–≥—Ä—ã_—É–≥–∞–¥–∞–π–∫–∞:
            if —Ç–µ–∫—Å—Ç.isdigit():
                —Ä–µ–∑—É–ª—å—Ç–∞—Ç = –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_—Ö–æ–¥_—É–≥–∞–¥–∞–π–∫–∞(user_id, —Ç–µ–∫—Å—Ç)
                –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç(—Ä–µ–∑—É–ª—å—Ç–∞—Ç)
            else:
                –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("–í–≤–µ–¥–∏ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 10 –∏–ª–∏ '—Å—Ç–æ–ø'")
            return
        elif user_id in –∏–≥—Ä—ã_–º–æ—Ä—Å–∫–æ–π_–±–æ–π:
            –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("–ò—Å–ø–æ–ª—å–∑—É–π –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∏–≥—Ä—ã –∏–ª–∏ –Ω–∞–ø–∏—à–∏ '—Å—Ç–æ–ø'")
            return
        elif user_id in –∏–≥—Ä—ã_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏:
            –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("–ò—Å–ø–æ–ª—å–∑—É–π –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∏–≥—Ä—ã –∏–ª–∏ –Ω–∞–ø–∏—à–∏ '—Å—Ç–æ–ø'")
            return
        elif user_id in –∏–≥—Ä—ã_—Ç—Ä–∏_–≤_—Ä—è–¥:
            –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("–ò—Å–ø–æ–ª—å–∑—É–π –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∏–≥—Ä—ã –∏–ª–∏ –Ω–∞–ø–∏—à–∏ '—Å—Ç–æ–ø'")
            return
        
        # –û–±—ã—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
        —Ä–µ–∑—É–ª—å—Ç–∞—Ç = –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_—Å–æ–æ–±—â–µ–Ω–∏–µ(message.text, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç, –∑–∞–ø—É—Å—Ç–∏—Ç—å_–∏–≥—Ä—É=True)
        
        # –ó–∞–ø—É—Å–∫ –∏–≥—Ä
        if —Ä–µ–∑—É–ª—å—Ç–∞—Ç == "hangman_start":
            –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("üéÆ –í—ã–±–µ—Ä–∏ —É—Ä–æ–≤–µ–Ω—å:\n\n1Ô∏è‚É£ –ª–µ–≥–∫–∏–π (7 –ø–æ–ø—ã—Ç–æ–∫)\n2Ô∏è‚É£ —Å—Ä–µ–¥–Ω–∏–π (5 –ø–æ–ø—ã—Ç–æ–∫)\n3Ô∏è‚É£ —Å–ª–æ–∂–Ω—ã–π (3 –ø–æ–ø—ã—Ç–∫–∏)\n\n–ù–∞–ø–∏—à–∏: –ª–µ–≥–∫–∏–π, —Å—Ä–µ–¥–Ω–∏–π –∏–ª–∏ —Å–ª–æ–∂–Ω—ã–π")
        elif —Ä–µ–∑—É–ª—å—Ç–∞—Ç == "guess_start":
            —Å–æ–∑–¥–∞—Ç—å_–∏–≥—Ä—É_—É–≥–∞–¥–∞–π–∫–∞(user_id)
            –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("üéØ –Ø –∑–∞–≥–∞–¥–∞–ª —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 10!\n–í–≤–µ–¥–∏ —Å–≤–æ—ë —á–∏—Å–ª–æ –∏–ª–∏ '—Å—Ç–æ–ø' –¥–ª—è –≤—ã—Ö–æ–¥–∞:")
        elif —Ä–µ–∑—É–ª—å—Ç–∞—Ç == "sea_start":
            –∏–≥—Ä–∞ = —Å–æ–∑–¥–∞—Ç—å_–∏–≥—Ä—É_–º–æ—Ä—Å–∫–æ–π_–±–æ–π(user_id)
            –∏–≥—Ä—ã_–º–æ—Ä—Å–∫–æ–π_–±–æ–π[user_id] = –∏–≥—Ä–∞
            markup = —Å–æ–∑–¥–∞—Ç—å_–∫–Ω–æ–ø–∫–∏_–º–æ—Ä—Å–∫–æ–π_–±–æ–π(–∏–≥—Ä–∞['–ø–æ–ª–µ'])
            bot.reply_to(message, "üö¢ –ú–æ—Ä—Å–∫–æ–π –±–æ–π!\n–§–ª–æ—Ç: 1√ó3, 2√ó2, 3√ó1\n–ù–∞–∂–º–∏ –Ω–∞ –∫–ª–µ—Ç–∫—É:", reply_markup=markup)
            return
        elif —Ä–µ–∑—É–ª—å—Ç–∞—Ç == "tic_start":
            —Å–æ–∑–¥–∞—Ç—å_–∏–≥—Ä—É_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏(user_id)
            –∏–≥—Ä–∞ = –∏–≥—Ä—ã_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏[user_id]
            markup = —Å–æ–∑–¥–∞—Ç—å_–∫–Ω–æ–ø–∫–∏_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏(–∏–≥—Ä–∞['–ø–æ–ª–µ'])
            bot.reply_to(message, "‚ùå‚≠ï –ö—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏!\n–¢—ã –∏–≥—Ä–∞–µ—à—å –∑–∞ ‚ùå\n–í—ã–±–µ—Ä–∏ –∫–ª–µ—Ç–∫—É:", reply_markup=markup)
            return
        elif —Ä–µ–∑—É–ª—å—Ç–∞—Ç == "dino_start":
            –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç("ü¶ï –î–∏–Ω–æ - –ø—Ä–æ—Å—Ç–∞—è —Ç–µ–∫—Å—Ç–æ–≤–∞—è –∏–≥—Ä–∞, –ª—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏.\n–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–∏–µ –∏–≥—Ä—ã!")
        elif —Ä–µ–∑—É–ª—å—Ç–∞—Ç == "match_start":
            –∏–≥—Ä–∞ = —Å–æ–∑–¥–∞—Ç—å_–∏–≥—Ä—É_—Ç—Ä–∏_–≤_—Ä—è–¥(user_id)
            –∏–≥—Ä—ã_—Ç—Ä–∏_–≤_—Ä—è–¥[user_id] = –∏–≥—Ä–∞
            markup = —Å–æ–∑–¥–∞—Ç—å_–∫–Ω–æ–ø–∫–∏_—Ç—Ä–∏_–≤_—Ä—è–¥(–∏–≥—Ä–∞['–ø–æ–ª–µ'])
            bot.reply_to(message, —Å–æ–∑–¥–∞—Ç—å_—Ç–µ–∫—Å—Ç_–∏–≥—Ä—ã(–∏–≥—Ä–∞), reply_markup=markup)
            return
            
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —É—Ä–æ–≤–Ω—è –¥–ª—è –≤–∏—Å–µ–ª–∏—Ü—ã
        elif —Ç–µ–∫—Å—Ç in ["–ª–µ–≥–∫–∏–π", "—Å—Ä–µ–¥–Ω–∏–π", "—Å–ª–æ–∂–Ω—ã–π"] and user_id not in –∏–≥—Ä—ã_–≤–∏—Å–µ–ª–∏—Ü–∞:
            —Å–æ–∑–¥–∞—Ç—å_–∏–≥—Ä—É_–≤–∏—Å–µ–ª–∏—Ü–∞(user_id, —Ç–µ–∫—Å—Ç)
            –∏–≥—Ä–∞ = –∏–≥—Ä—ã_–≤–∏—Å–µ–ª–∏—Ü–∞[user_id]
            —Å–æ—Å—Ç–æ—è–Ω–∏–µ = f"–°–ª–æ–≤–æ: {' '.join(–∏–≥—Ä–∞['—É–≥–∞–¥–∞–Ω–æ'])}\n–û—Å—Ç–∞–ª–æ—Å—å –ø–æ–ø—ã—Ç–æ–∫: {–∏–≥—Ä–∞['–ø–æ–ø—ã—Ç–∫–∏']}"
            –æ—Ç–ø—Ä–∞–≤–∏—Ç—å_–æ—Ç–≤–µ—Ç(f"üéØ –ò–≥—Ä–∞ –Ω–∞—á–∞—Ç–∞!\n{—Å–æ—Å—Ç–æ—è–Ω–∏–µ}\n\n–í–≤–µ–¥–∏ –±—É–∫–≤—É –∏–ª–∏ '—Å—Ç–æ–ø':")
    
    @bot.callback_query_handler(func=lambda call: True)
    def handle_callback(call):
        user_id = call.from_user.id
        data = call.data
        
        if data.startswith("sea_"):
            if user_id in –∏–≥—Ä—ã_–º–æ—Ä—Å–∫–æ–π_–±–æ–π:
                _, x, y = data.split("_")
                –∏–≥—Ä–∞ = –∏–≥—Ä—ã_–º–æ—Ä—Å–∫–æ–π_–±–æ–π[user_id]
                markup, —Ç–µ–∫—Å—Ç = –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_—Ö–æ–¥_–º–æ—Ä—Å–∫–æ–π_–±–æ–π(–∏–≥—Ä–∞, int(x), int(y))
                if markup:
                    try:
                        bot.edit_message_text(—Ç–µ–∫—Å—Ç, call.message.chat.id, call.message.message_id, reply_markup=markup)
                    except:
                        pass
                else:
                    del –∏–≥—Ä—ã_–º–æ—Ä—Å–∫–æ–π_–±–æ–π[user_id]
                    try:
                        bot.edit_message_text(—Ç–µ–∫—Å—Ç, call.message.chat.id, call.message.message_id)
                    except:
                        pass

        
        elif data.startswith("tic_"):
            if user_id in –∏–≥—Ä—ã_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏:
                _, x, y = data.split("_")
                markup, —Ç–µ–∫—Å—Ç = –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_—Ö–æ–¥_–∫—Ä–µ—Å—Ç–∏–∫–∏_–Ω–æ–ª–∏–∫–∏(user_id, int(x), int(y))
                if markup:
                    try:
                        bot.edit_message_text(—Ç–µ–∫—Å—Ç, call.message.chat.id, call.message.message_id, reply_markup=markup)
                    except:
                        pass
                else:
                    try:
                        bot.edit_message_text(—Ç–µ–∫—Å—Ç, call.message.chat.id, call.message.message_id)
                    except:
                        pass
        
        elif data.startswith("match_"):
            if user_id in –∏–≥—Ä—ã_—Ç—Ä–∏_–≤_—Ä—è–¥:
                _, x, y = data.split("_")
                –∏–≥—Ä–∞ = –∏–≥—Ä—ã_—Ç—Ä–∏_–≤_—Ä—è–¥[user_id]
                
                # –ï—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤—ã–π –≤—ã–±–æ—Ä –∫–ª–µ—Ç–∫–∏ –∏–ª–∏ –Ω–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π
                if not –∏–≥—Ä–∞.get('–≤—ã–±—Ä–∞–Ω–Ω–∞—è_–∫–ª–µ—Ç–∫–∞'):
                    markup, —Ç–µ–∫—Å—Ç = –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_—Ö–æ–¥_—Ç—Ä–∏_–≤_—Ä—è–¥(–∏–≥—Ä–∞, int(x), int(y))
                    if markup:
                        try:
                            bot.edit_message_text(—Ç–µ–∫—Å—Ç, call.message.chat.id, call.message.message_id, reply_markup=markup)
                        except:
                            # –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫—É
                            pass
                    else:
                        –∏–≥—Ä–∞['–≤—ã–±—Ä–∞–Ω–Ω–∞—è_–∫–ª–µ—Ç–∫–∞'] = None
                        try:
                            bot.edit_message_text(—Ç–µ–∫—Å—Ç, call.message.chat.id, call.message.message_id)
                        except:
                            pass
                else:
                    # –í—Ç–æ—Ä–æ–π –≤—ã–±–æ—Ä - –æ–±–º–µ–Ω –∫–ª–µ—Ç–æ–∫
                    x1, y1 = –∏–≥—Ä–∞['–≤—ã–±—Ä–∞–Ω–Ω–∞—è_–∫–ª–µ—Ç–∫–∞']
                    x2, y2 = int(x), int(y)
                    
                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–ª–µ—Ç–∫–∏ —Å–æ—Å–µ–¥–Ω–∏–µ
                    if abs(x1 - x2) + abs(y1 - y2) == 1:
                        —É—Å–ø–µ—Ö, —Ç–µ–∫—Å—Ç = –æ–±–º–µ–Ω_–∫–ª–µ—Ç–æ–∫(–∏–≥—Ä–∞, x1, y1, x2, y2)
                        –∏–≥—Ä–∞['–≤—ã–±—Ä–∞–Ω–Ω–∞—è_–∫–ª–µ—Ç–∫–∞'] = None
                        
                        markup = —Å–æ–∑–¥–∞—Ç—å_–∫–Ω–æ–ø–∫–∏_—Ç—Ä–∏_–≤_—Ä—è–¥(–∏–≥—Ä–∞['–ø–æ–ª–µ'])
                        –Ω–æ–≤—ã–π_—Ç–µ–∫—Å—Ç = f"{—Ç–µ–∫—Å—Ç}\n\n{—Å–æ–∑–¥–∞—Ç—å_—Ç–µ–∫—Å—Ç_–∏–≥—Ä—ã(–∏–≥—Ä–∞)}"
                        
                        try:
                            bot.edit_message_text(–Ω–æ–≤—ã–π_—Ç–µ–∫—Å—Ç, call.message.chat.id, call.message.message_id, reply_markup=markup)
                        except:
                            # –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫—É
                            pass
                    else:
                        # –ù–µ —Å–æ—Å–µ–¥–Ω–∏–µ –∫–ª–µ—Ç–∫–∏ - –≤—ã–±–∏—Ä–∞–µ–º –Ω–æ–≤—É—é
                        markup, —Ç–µ–∫—Å—Ç = –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_—Ö–æ–¥_—Ç—Ä–∏_–≤_—Ä—è–¥(–∏–≥—Ä–∞, x2, y2)
                        if markup:
                            try:
                                bot.edit_message_text(—Ç–µ–∫—Å—Ç, call.message.chat.id, call.message.message_id, reply_markup=markup)
                            except:
                                pass
                        else:
                            –∏–≥—Ä–∞['–≤—ã–±—Ä–∞–Ω–Ω–∞—è_–∫–ª–µ—Ç–∫–∞'] = None
                            try:
                                bot.edit_message_text(—Ç–µ–∫—Å—Ç, call.message.chat.id, call.message.message_id)
                            except:
                                pass
        
        bot.answer_callback_query(call.id)

    print("ü§ñ Telegram –±–æ—Ç –∑–∞–ø—É—â–µ–Ω...")
    print("üì± –ù–∞–π–¥–∏—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram –∏ –Ω–∞–ø–∏—à–∏—Ç–µ /start")
    bot.polling()
    return True

# –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–ø—É—Å–∫–∞
if __name__ == "__main__":
    try:
        –∑–∞–ø—É—Å—Ç–∏—Ç—å_–±–æ—Ç–∞()
    except KeyboardInterrupt:
        print("\nüëÆ: –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!")
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")