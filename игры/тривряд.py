def —Å–æ–∑–¥–∞—Ç—å_–∏–≥—Ä—É_—Ç—Ä–∏_–≤_—Ä—è–¥(user_id):
    """–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∏–≥—Ä—ã —Ç—Ä–∏ –≤ —Ä—è–¥"""
    import random
    
    # –ü–æ–ª–µ 8x8 —Å —Ä–∞–∑–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏ (–∫—Ä–∞—Å–æ—á–Ω—ã–µ —Ñ—Ä—É–∫—Ç—ã)
    —Å–∏–º–≤–æ–ª—ã = ["üçé", "üçä", "üçá", "üçì", "üçí", "üçë"]
    –ø–æ–ª–µ = []
    
    # –°–æ–∑–¥–∞—ë–º –ø–æ–ª–µ –±–µ–∑ –Ω–∞—á–∞–ª—å–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
    for i in range(8):
        —Å—Ç—Ä–æ–∫–∞ = []
        for j in range(8):
            # –í—ã–±–∏—Ä–∞–µ–º —Å–∏–º–≤–æ–ª, –∏–∑–±–µ–≥–∞—è —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ –∏ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏
            –¥–æ—Å—Ç—É–ø–Ω—ã–µ = —Å–∏–º–≤–æ–ª—ã.copy()
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å (2 –Ω–∞–∑–∞–¥)
            if j >= 2 and —Å—Ç—Ä–æ–∫–∞[j-1] == —Å—Ç—Ä–æ–∫–∞[j-2]:
                if —Å—Ç—Ä–æ–∫–∞[j-1] in –¥–æ—Å—Ç—É–ø–Ω—ã–µ:
                    –¥–æ—Å—Ç—É–ø–Ω—ã–µ.remove(—Å—Ç—Ä–æ–∫–∞[j-1])
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å (2 –Ω–∞–∑–∞–¥)
            if i >= 2 and –ø–æ–ª–µ[i-1][j] == –ø–æ–ª–µ[i-2][j]:
                if –ø–æ–ª–µ[i-1][j] in –¥–æ—Å—Ç—É–ø–Ω—ã–µ:
                    –¥–æ—Å—Ç—É–ø–Ω—ã–µ.remove(–ø–æ–ª–µ[i-1][j])
            
            # –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —Å–∏–º–≤–æ–ª –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
            —Å–∏–º–≤–æ–ª = random.choice(–¥–æ—Å—Ç—É–ø–Ω—ã–µ)
            —Å—Ç—Ä–æ–∫–∞.append(—Å–∏–º–≤–æ–ª)
        –ø–æ–ª–µ.append(—Å—Ç—Ä–æ–∫–∞)
    
    return {
        '–ø–æ–ª–µ': –ø–æ–ª–µ,
        '—Å—á—ë—Ç': 0,
        '—Ö–æ–¥—ã': 0,
        '–≤—ã–±—Ä–∞–Ω–Ω–∞—è_–∫–ª–µ—Ç–∫–∞': None
    }

def —Å–æ–∑–¥–∞—Ç—å_–∫–Ω–æ–ø–∫–∏_—Ç—Ä–∏_–≤_—Ä—è–¥(–ø–æ–ª–µ, –≤—ã–±—Ä–∞–Ω–Ω–∞—è_–∫–ª–µ—Ç–∫–∞=None):
    """–°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –¥–ª—è —Ç—Ä–∏ –≤ —Ä—è–¥ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º —Ä–∞–∑–º–µ—Ä–æ–º"""
    import telebot
    markup = telebot.types.InlineKeyboardMarkup(row_width=8)
    
    for i in range(8):
        row = []
        for j in range(8):
            —Å–∏–º–≤–æ–ª = –ø–æ–ª–µ[i][j]
            
            # –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä –∫–Ω–æ–ø–∫–∏
            if –≤—ã–±—Ä–∞–Ω–Ω–∞—è_–∫–ª–µ—Ç–∫–∞ and (i, j) == –≤—ã–±—Ä–∞–Ω–Ω–∞—è_–∫–ª–µ—Ç–∫–∞:
                text = "‚Ä¢"  # –ú–∞–ª–µ–Ω—å–∫–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
            else:
                text = —Å–∏–º–≤–æ–ª
            
            # –°–æ–∑–¥–∞—ë–º –∫–Ω–æ–ø–∫—É —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —à–∏—Ä–∏–Ω–æ–π
            button = telebot.types.InlineKeyboardButton(text, callback_data=f"match_{i}_{j}")
            row.append(button)
        markup.row(*row)
    return markup

def –Ω–∞–π—Ç–∏_—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è(–ø–æ–ª–µ):
    """–ü–æ–∏—Å–∫ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –≤ –ø–æ–ª–µ"""
    —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è = set()
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
    for i in range(8):
        for j in range(6):  # –î–æ 6, —á—Ç–æ–±—ã –ø–æ–º–µ—Å—Ç–∏–ª–∏—Å—å 3 —Å–∏–º–≤–æ–ª–∞
            if –ø–æ–ª–µ[i][j] == –ø–æ–ª–µ[i][j+1] == –ø–æ–ª–µ[i][j+2]:
                —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è.update([(i, j), (i, j+1), (i, j+2)])
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
    for i in range(6):  # –î–æ 6, —á—Ç–æ–±—ã –ø–æ–º–µ—Å—Ç–∏–ª–∏—Å—å 3 —Å–∏–º–≤–æ–ª–∞
        for j in range(8):
            if –ø–æ–ª–µ[i][j] == –ø–æ–ª–µ[i+1][j] == –ø–æ–ª–µ[i+2][j]:
                —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è.update([(i, j), (i+1, j), (i+2, j)])
    
    return —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è

def —É–¥–∞–ª–∏—Ç—å_—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è(–ø–æ–ª–µ, —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è):
    """–£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –∏ –ø–∞–¥–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤"""
    import random
    
    —Å–∏–º–≤–æ–ª—ã = ["üçé", "üçä", "üçá", "üçì", "üçí", "üçë"]
    
    # –£–¥–∞–ª—è–µ–º —Å–æ–≤–ø–∞–≤—à–∏–µ —Å–∏–º–≤–æ–ª—ã
    for i, j in —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è:
        –ø–æ–ª–µ[i][j] = None
    
    # –ü–∞–¥–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤
    for j in range(8):
        # –°–¥–≤–∏–≥–∞–µ–º —Å–∏–º–≤–æ–ª—ã –≤–Ω–∏–∑
        –∫–æ–ª–æ–Ω–∫–∞ = [–ø–æ–ª–µ[i][j] for i in range(8) if –ø–æ–ª–µ[i][j] is not None]
        # –î–æ–ø–æ–ª–Ω—è–µ–º –Ω–æ–≤—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏
        while len(–∫–æ–ª–æ–Ω–∫–∞) < 8:
            –∫–æ–ª–æ–Ω–∫–∞.append(random.choice(—Å–∏–º–≤–æ–ª—ã))
        # –ó–∞–ø–æ–ª–Ω—è–µ–º –∫–æ–ª–æ–Ω–∫—É –æ–±—Ä–∞—Ç–Ω–æ
        for i in range(8):
            –ø–æ–ª–µ[i][j] = –∫–æ–ª–æ–Ω–∫–∞[i]

def –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å_—Ö–æ–¥_—Ç—Ä–∏_–≤_—Ä—è–¥(–∏–≥—Ä–∞, x, y):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ö–æ–¥–∞ –≤ —Ç—Ä–∏ –≤ —Ä—è–¥"""
    if x < 0 or x >= 8 or y < 0 or y >= 8:
        return None, "‚ö†Ô∏è –ù–µ–≤–µ—Ä–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Å–æ—Å–µ–¥–Ω–∏–µ –∫–ª–µ—Ç–∫–∏ –¥–ª—è –æ–±–º–µ–Ω–∞
    —Å–æ—Å–µ–¥–∏ = []
    for dx, dy in [(0, 1), (0, -1), (1, 0), (-1, 0)]:
        nx, ny = x + dx, y + dy
        if 0 <= nx < 8 and 0 <= ny < 8:
            —Å–æ—Å–µ–¥–∏.append((nx, ny))
    
    if not —Å–æ—Å–µ–¥–∏:
        return None, "‚ö†Ô∏è –ù–µ—Ç —Å–æ—Å–µ–¥–Ω–∏—Ö –∫–ª–µ—Ç–æ–∫ –¥–ª—è –æ–±–º–µ–Ω–∞"
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–ª–µ—Ç–∫—É
    –∏–≥—Ä–∞['–≤—ã–±—Ä–∞–Ω–Ω–∞—è_–∫–ª–µ—Ç–∫–∞'] = (x, y)
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ö–æ–¥—ã
    markup = —Å–æ–∑–¥–∞—Ç—å_–∫–Ω–æ–ø–∫–∏_—Ç—Ä–∏_–≤_—Ä—è–¥_—Å_–≤—ã–±–æ—Ä–æ–º(–∏–≥—Ä–∞['–ø–æ–ª–µ'], x, y, —Å–æ—Å–µ–¥–∏)
    return markup, f"–í—ã–±–µ—Ä–∏ —Å–æ—Å–µ–¥–Ω—é—é –∫–ª–µ—Ç–∫—É –¥–ª—è –æ–±–º–µ–Ω–∞ —Å ({x},{y}):"

def —Å–æ–∑–¥–∞—Ç—å_–∫–Ω–æ–ø–∫–∏_—Ç—Ä–∏_–≤_—Ä—è–¥_—Å_–≤—ã–±–æ—Ä–æ–º(–ø–æ–ª–µ, x, y, —Å–æ—Å–µ–¥–∏):
    """–°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ —Å –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–ª–µ—Ç–∫–∏ –∏ —Å–æ—Å–µ–¥–µ–π"""
    import telebot
    markup = telebot.types.InlineKeyboardMarkup(row_width=8)
    
    for i in range(8):
        row = []
        for j in range(8):
            —Å–∏–º–≤–æ–ª = –ø–æ–ª–µ[i][j]
            
            # –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–ª–µ—Ç–∫—É –∏ —Å–æ—Å–µ–¥–µ–π, —Å–æ—Ö—Ä–∞–Ω—è—è —Ä–∞–∑–º–µ—Ä
            if (i, j) == (x, y):
                text = "‚Ä¢"  # –ú–∞–ª–µ–Ω—å–∫–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
            elif (i, j) in —Å–æ—Å–µ–¥–∏:
                text = "¬∑"  # –ú–∞–ª–µ–Ω—å–∫–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
            else:
                text = —Å–∏–º–≤–æ–ª
            
            row.append(telebot.types.InlineKeyboardButton(text, callback_data=f"match_{i}_{j}"))
        markup.row(*row)
    return markup

def –æ–±–º–µ–Ω_–∫–ª–µ—Ç–æ–∫(–∏–≥—Ä–∞, x1, y1, x2, y2):
    """–û–±–º–µ–Ω –¥–≤—É—Ö –∫–ª–µ—Ç–æ–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π"""
    –ø–æ–ª–µ = –∏–≥—Ä–∞['–ø–æ–ª–µ']
    
    # –û–±–º–µ–Ω–∏–≤–∞–µ–º –∫–ª–µ—Ç–∫–∏
    –ø–æ–ª–µ[x1][y1], –ø–æ–ª–µ[x2][y2] = –ø–æ–ª–µ[x2][y2], –ø–æ–ª–µ[x1][y1]
    
    # –ò—â–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
    —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è = –Ω–∞–π—Ç–∏_—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è(–ø–æ–ª–µ)
    
    if —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è:
        # –£–¥–∞–ª—è–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –∏ –ø–∞–¥–µ–Ω–∏–µ
        —É–¥–∞–ª–∏—Ç—å_—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è(–ø–æ–ª–µ, —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è)
        –æ—á–∫–∏ = len(—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è) * 10
        –∏–≥—Ä–∞['—Å—á—ë—Ç'] += –æ—á–∫–∏
        –∏–≥—Ä–∞['—Ö–æ–¥—ã'] += 1
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–æ–≤—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–æ—Å–ª–µ –ø–∞–¥–µ–Ω–∏—è
        –Ω–æ–≤—ã–µ_—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è = –Ω–∞–π—Ç–∏_—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è(–ø–æ–ª–µ)
        while –Ω–æ–≤—ã–µ_—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è:
            —É–¥–∞–ª–∏—Ç—å_—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è(–ø–æ–ª–µ, –Ω–æ–≤—ã–µ_—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è)
            –æ—á–∫–∏ = len(–Ω–æ–≤—ã–µ_—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è) * 10
            –∏–≥—Ä–∞['—Å—á—ë—Ç'] += –æ—á–∫–∏
            –Ω–æ–≤—ã–µ_—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è = –Ω–∞–π—Ç–∏_—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è(–ø–æ–ª–µ)
        
        return True, f"üí• –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ! +{–æ—á–∫–∏} –æ—á–∫–æ–≤\n–°—á—ë—Ç: {–∏–≥—Ä–∞['—Å—á—ë—Ç']}"
    else:
        # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—Ä–∞—Ç–Ω–æ, –µ—Å–ª–∏ –Ω–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
        –ø–æ–ª–µ[x1][y1], –ø–æ–ª–µ[x2][y2] = –ø–æ–ª–µ[x2][y2], –ø–æ–ª–µ[x1][y1]
        return False, "‚ùå –ù–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π. –ü–æ–ø—Ä–æ–±—É–π –¥—Ä—É–≥–æ–π —Ö–æ–¥."

def —Å–æ–∑–¥–∞—Ç—å_—Ç–µ–∫—Å—Ç_–∏–≥—Ä—ã(–∏–≥—Ä–∞):
    """–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–≥—Ä—ã"""
    return f"üéØ –¢—Ä–∏ –≤ —Ä—è–¥!\n–°—á—ë—Ç: {–∏–≥—Ä–∞['—Å—á—ë—Ç']}\n–•–æ–¥—ã: {–∏–≥—Ä–∞['—Ö–æ–¥—ã']}" 